{{ define "main" }}
  <link rel="stylesheet" href="/css/custom.css">
  <div class="pa3 pa4-ns w-100 w-70-ns center post-list">
    <h1 class="f2 lh-title fw2 mb4 bb b--black-10 pb3">All Posts</h1>
    
    {{/* --- START: Permanent Link to Fish Pics Gallery --- */}}
    {{ $gallery := .Site.GetPage "page" "fish-pics" }}
    {{ if $gallery }}
      <article class="bb b--black-10 pb4 mb4 flex flex-wrap bg-light-blue br2 shadow-3">
        {{/* Use w-40 for the image on wide screens to make it stand out more */}}
        {{ if $gallery.Params.featured_image }}
        <div class="w-100 w-30-ns pr3-ns mb3 mb0-ns">
          {{ $featured := $gallery.Resources.GetMatch $gallery.Params.featured_image }}
          {{ if $featured }}
            <img src="{{ $featured.RelPermalink }}" alt="{{ $gallery.Title }}" class="db w-100" style="max-height: 200px; object-fit: cover;">
          {{ else }}
            {{/* Fallback to the old /images path if resource not found in bundle */}}
            <img src="/images/{{ $gallery.Params.featured_image }}" alt="{{ $gallery.Title }}" class="db w-100" style="max-height: 200px; object-fit: cover;">
          {{ end }}
        </div>
        <div class="w-100 w-70-ns">
        {{ else }}
        <div class="w-100">
        {{ end }}
          <h2 class="f3 fw6 mb2 mt0">
            <a href="{{ $gallery.Permalink }}" class="link dark-gray hover-white">
              {{ $gallery.Title | default "Fish Pics Gallery" }} ðŸ“¸
            </a>
          </h2>
          <p class="f5 lh-copy mv3 dark-gray">
            See all the latest catches in our dedicated photo gallery. Batch uploaded and beautiful!
          </p>
          <a href="{{ $gallery.Permalink }}" class="f6 link dim br2 ph3 pv2 dib white bg-dark-gray hover-bg-navy">
            View Gallery â†’
          </a>
        </div>
      </article>
    {{ end }}
    {{/* --- END: Permanent Link to Fish Pics Gallery --- */}}
    
    {{ range where .Site.RegularPages "Type" "posts" }}
      <article class="bb b--black-10 pb4 mb4 flex flex-wrap">
        {{ if .Params.featured_image }}
        <div class="w-100 w-30-ns pr3-ns mb3 mb0-ns">
          <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" class="db w-100" style="max-height: 200px; object-fit: cover;">
        </div>
        <div class="w-100 w-70-ns">
        {{ else }}
        <div class="w-100">
        {{ end }}
          <h2 class="f3 fw6 mb2 mt0">
            <a href="{{ .Permalink }}" class="link dark-gray hover-blue">
              {{ .Title }}
            </a>
          </h2>
          <p class="f6 mid-gray mv2">{{ .Date.Format "January 2, 2006" }}</p>
          {{ if .Description }}
            <p class="f5 lh-copy mv3 dark-gray">{{ .Description }}</p>
          {{ else }}
            <p class="f5 lh-copy mv3 dark-gray">{{ .Summary | plainify | truncate 200 }}</p>
          {{ end }}
          <a href="{{ .Permalink }}" class="f6 link dim br2 ph3 pv2 dib white bg-dark-gray hover-bg-blue">
            Read more â†’
          </a>
        </div>
      </article>
    {{ end }}
  </div>
{{ end }}